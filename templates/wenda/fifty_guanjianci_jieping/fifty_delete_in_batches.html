<link rel="stylesheet" href="http://cdn.admui.com/demo/pjax/1.3.0/vendor/multi-select/multi-select.css">
<link rel="stylesheet" href="http://cdn.admui.com/demo/pjax/1.3.0/vendor/bootstrap-select/bootstrap-select.css">

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="关闭">
        <span aria-hidden="true">×</span>
    </button>
    <h4 class="modal-title">批量删除关键词</h4>
</div>
<div class="modal-body">
    <form class="form-horizontal">
        {% csrf_token %}
          <div class="form-group">
           <label class="col-md-2 control-label" for="bianji" style="padding-right: 20px; ">编辑</label>
            <div class="col-md-6">
                <select multiple style="width: 300px;" class="form-control" data-plugin="select2" tabindex="-1" aria-hidden="true" id="bianji" name="bianji">
                    <option value="">请选择</option>
                    {% for obj in data_list %}
                        <option value="{{ 1 }}">{{ obj }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </form>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-primary" id="delete_button">确认删除</button>
</div>
<script src="http://cdn.admui.com/demo/pjax/1.3.0/vendor/magnific-popup/jquery.magnific-popup.min.js" data-name="popup"></script>
<script src="http://cdn.admui.com/demo/pjax/1.3.0/js/examples/components/advanced/lightbox.js" data-deps="popup"></script>
<script>

    {# 调整模态对话框的大小 #}
    $("#exampleFormModal .modal-dialog").css("width", "700px");

    $("#m-client_user_id").select2({
        dropdownParent:$("#exampleFormModal")
    });
{#    $.fn.modal.Constructor.prototype.enforceFocus = function () { };#}

    $("#delete_button").on('click', function () {

        $("#create_button").attr("disabled", "disabled");

        var data = $(".form-horizontal").serialize();

        var url = 'delete_guanjianci/{{ o_id  }}/';
        $.post(url, data, function (result) {

            $("#delete_button").removeAttr("disabled");

            if(!result['status']){
                toastr['error'](result['message']);
            }else{
                toastr['success'](result['message']);
                $('.modal').modal("hide");
                table.ajax.reload();
            }
        }, 'json')

    })

</script>
